{% extends 'base.html' %}
{% block content %}
<section>
  <header class="grid">
    <div><h2>Agents</h2></div>
    <div class="align-right"><a role="button" href="{{ url_for('agent_create') }}">New agent</a></div>
  </header>
  <table>
    <thead>
      <tr><th>Name</th><th>Model</th><th>Status</th><th></th></tr>
    </thead>
    <tbody>
      {% for agent in agents %}
      <tr>
        <td>{{ agent.name }}</td>
        <td>{{ agent.model }}</td>
        <td>{{ statuses[agent.id] }}</td>
        <td>
          <a href="{{ url_for('agent_edit', agent_id=agent.id) }}">Edit</a>
          <a href="{{ url_for('agent_memory', agent_id=agent.id) }}">Memory</a>
          <form method="post" action="{{ url_for('agent_start', agent_id=agent.id) }}" style="display:inline">
            <button type="submit">Start</button>
          </form>
          <form method="post" action="{{ url_for('agent_stop', agent_id=agent.id) }}" style="display:inline">
            <button type="submit" class="secondary">Stop</button>
          </form>
          <form method="post" action="{{ url_for('agent_delete', agent_id=agent.id) }}" style="display:inline" onclick="return confirm('Delete agent?')">
            <button type="submit" class="contrast">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
