{% extends 'base.html' %}
{% block content %}
<section>
  <header class="grid">
    <div><h2>Users</h2></div>
    <div class="align-right"><a role="button" href="{{ url_for('user_create') }}">New user</a></div>
  </header>
  <table>
    <thead>
      <tr><th>Username</th><th>Discord ID</th><th>Superadmin</th><th>Active</th><th></th></tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ user.username }}</td>
        <td>{{ user.discord_id or '-' }}</td>
        <td>{{ 'Yes' if user.is_superadmin else 'No' }}</td>
        <td>{{ 'Yes' if user.is_active else 'No' }}</td>
        <td>
          <a href="{{ url_for('user_edit', user_id=user.id) }}">Edit</a>
          <form method="post" action="{{ url_for('user_reset_api', user_id=user.id) }}" style="display:inline">
            <button type="submit">Reset API key</button>
          </form>
          <form method="post" action="{{ url_for('user_delete', user_id=user.id) }}" style="display:inline" onclick="return confirm('Delete user?')">
            <button type="submit" class="secondary">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
